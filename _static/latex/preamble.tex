%
% Phoenix-RTOS
%
% Copyright 2025 Phoenix Systems
% Author: Adam Debek
%
% This file is part of Phoenix-RTOS.
%
% %LICENSE%

\setcounter{secnumdepth}{3}
\definecolor{ps-orange}{HTML}{ea5b22}
\definecolor{ps-darkblue}{HTML}{26384f}
\definecolor{ps-lightblue}{HTML}{657c9f}

% Set the text color
\AtBeginDocument{\color{ps-darkblue}}

% Table of contents spacing
\setlength{\cftsecindent}{0pt}
\setlength{\cftsecnumwidth}{2em}

\setlength{\cftsubsecindent}{2em}
\setlength{\cftsubsecnumwidth}{3em}

\setlength{\cftsubsubsecindent}{5em}
\setlength{\cftsubsubsecnumwidth}{4em}

% Add padding to the right inside code block frame
\renewcommand\sphinxVerbatimFormatLine[1]{\strut\hspace{4pt}#1}

% Section title styling
\makeatletter
\def\@makesectionhead#1{%
    {\parindent \z@
    \interlinepenalty\@M
    \noindent\textcolor{ps-orange}{\rule{\textwidth}{2pt}}
    \par\vspace{0.5em}
    {\bfseries\Large\color{ps-darkblue}#1}
    \noindent\textcolor{ps-orange}{\rule{\textwidth}{2pt}}
    \par\vspace{0em}
}}
\renewcommand{\section}{\@startsection{section}{1}{\z@}%
{-3.5ex \@plus -1ex \@minus -.2ex}%
{2.3ex \@plus.2ex}%
{\@makesectionhead}}
\makeatother

% Add dot to the section title only
\renewcommand{\thesection}{\arabic{section}.\hspace{-0.5em}}
\renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}}
\renewcommand{\thesubsubsection}{\arabic{section}.\arabic{subsection}.\arabic{subsubsection}}

% Make sections start on new pages
\pretocmd{\section}{\clearpage}{}{}

% Style page numbers
\fancypagestyle{normal}{
    \fancyhf{}
    \fancyfoot[R]{\textcolor{ps-lightblue}{\thepage\,/\,\pageref*{LastPage}}}
}

% Apply the style to all pages
\pagestyle{normal}
